# 2019 03 05 - 트리

### 트리란?

- 비선형
- 1:n구조를 가지는 그래프
- 원소들 간 계층관계를 가질 때 사용하면 좋다.
- 한 개 이상의 노드로 이루어진 유한집합.
- 서브트리(부분집합)으로 나눌 수 있다.
- <strong>결합 컴포넌트다!!!(connected component)</strong>
  - 문제에서 그래프를 줄 때 서로 독립적인 여러 개의 그래프를 하나의 connected component로 줄 수 있다.

* <strong>싸이클이 없다.</strong> = 어떤 두 노드 사이에 경로는 단 하나밖에 없다!!!!!!!



##### 노드  - 트리의 원소

* 노드와 정점을 구별해야 한다.

* 조상노드: 어떤 노드에서 루트 노드까지 가는 길에 만나는 모든 노드들

* 공통조상이 나온다! -> 문제는 최소공통조상(lowest common ancestor, LCA) = 분기되는 그 지점

  

##### 간선 - 노드를 연결하는 선, 부모 노드와 자식 노드 연결

- 노드의 수 -1개의 간선이 있다!



##### 차수

* 노드의 차수: 노드에 연결된 자식노드수
* 트리차수: 노드차수 중 가장 큰 값 = 트리높이, 루트의 높이 = 0, 가장 말단의 높이 = 트리전체 높이
* 단말 노드: 차수가 0인 노드. 자식이 없는 노드



### 이진트리!

* 모든 노드들이 2개의 서브트리를 갖는 트결한 형태의 트리
* 각 노드가 자식 노드를 최대한 2개까지만 가질 수 있는 트리
  * 중간에 비어 있을 수 있다.
* 왼쪽과 오른쪽을 구분한다는 점이 중요!!!!
* 루트 하나만 있어도 트리다!
* 높이 h에서 노드최소개수는 h+1개, 최대는 2^(h+1) -1 개다. 
  * 최소개수는 각 높이마다 1개씩만 있는 경우!
  * 최대개수는 ( 2^0 + 2^1 + 2^2 + 2^3 ) = h=3일 때 최대



##### 포화이진트리(Full Binary Tree)

- 포화이진트리는 완전 이진트리에 포함된다!

##### 완전이진트리(Complete Binary Tree)

- 이진힙: 힙이라는 자료구조가 있다. 

  - 이진힙은 완전이진트리의 형태를 무조건 갖추고 있다.

- 마지막 높이 이전까지는 포화이진트리이되, 마지막 높이에는 다 차 있지 않아도 된다.

- 이 때 중요한 것은 맨 왼쪽에서부터 순서대로 노드가 차 있어야 한다!!!

  - 중간에 빈 데가 없어서 리스트로 구현하기가 좋다.

  ![1551748908125](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1551748908125.png)

  

##### 편향이진트리(skewed binary tree)

- 시간복잡도를 떨어뜨릴 수 없다. 별로 안좋다~





#### 이진트리 순회하기

특별한 세 가지 방법이 있다!

트리는 비선형구조라서 선후연결관계를 알 수 없어서 특별한 방법이 필요하다.

항상 좌를 우보다 먼저 처리한다!



* 재귀로 살피게 되면 항상 모든 노드를 3번 거쳐간다.
  * 진입, 왼쪽노드 보고 돌아오기, 오른쪽 노드 보고 돌아오기! 
  * 맨 마지막 노드도 공백노드 왼 오가 있다고 따지고 보므로... 결국 3번 보게 된다.
* 이 세가지 중 한 시점을 고정해서 그 때 다른 처리를 하면, 이에 따라 순회방법이 결정된다.
* 어떤 노드를 보거나 그 노드를 루트로 하는 서브트리를 보게 된다.

- 재귀로 호출해서 순회하는데, 항상 왼쪽부터 호출한다!

![1551749740214](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1551749740214.png)

![1551750399716](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1551750399716.png)

##### 전위순회: 부모, 자식 좌, 자식 우

> \[ A ] \[ B D E H I ] \[ C F G ]
>
> 서브트리도 부모 - 좌 -우 순서로 나온다.

> A B D H I E J C F K G L M

- 



##### 중위순회: 자식 좌, 부모, 자식 우

> \[ D B H E I ] \[ A ] \[ F C G ]

> H D I B J E A F K C L G M 

- 



##### 후위순회: 자식 좌, 자식 우, 부모

> \[ D H I E B ] \[ F G C ] \[ A ] 

> H I D J E B K F L M G C A

* 왼쪽 서브트리 후 오른쪽 서브트리



```python
def traverse(T):
	if T:
		traverse(T.left)
		traverse(T.right)
```

- 함수 및 여타 처리를 재귀함수의 어느 곳에서 하는지에 따라 전위 중위 후위가 결정된다.



#### 이진트리의 표현

- 노드번호 * 2 = 왼쪽자식노드번호
- 단말노드의 여부를 저장해놓거나.. 여러 방법으로 표시를 해줘야



##### 연결리스트

- 노드를 표현하는 클래스 객체를 만든다.



##### 수식을 표현하는 이진트리: 후위순회

- 후위표기법으로 바꾸지 않아도 후위순회만으로 쉽게 계산할 수 있다!



#### 이진탐색트리

- 중간에 새로운 자료가 오거나 기존 자료가 빈번하게 삭제되는 경우 리스트는 비용이 많이 들기 때문에 이진탐색트리를 만든다.
- 자식 좌 < 부모 < 자식 우 순서로 만든다
- 중위순회하면 오름차순으로 정렬가능

##### 탐색연산

* 루트와 비교해서 key가 더 크면 오른쪽, 같으면 반환, 작으면 왼쪽으로 가면 된다.
* 있다면 만나고, 없다면 다 순회....

##### 삽입연산

- 탐색 먼저!
- 탐색이 실패한 위치에서 삽입을 하고., 탐색이 성공하면 삽입할 수 없다.

##### 삭제연산

- 자식이 없으면 깔끔하게 삭제
- 자식이 왼오 중 하나만 있으면?
  - 지울 때 하나뿐인 자식을 자신의 위치에 연결해준다.
- 자식이 왼오 둘 다 있으면?
  - 자식들의 중간값을 찾아서 대체.. 
    - 중간값에 가까운 값을 찾기 = 왼쪽 서브트리의 가장 큰 값 혹은 오른쪽 서브트리의 가장 작은 값.
    - 이 경우 원래 있던 자리에서 중간값을 삭제해 줘야 한다.
  - 재귀적으로 계속 중간값 찾아서 대체해 줘야 한다.



##### 이진탐색트리의 성능

- O(logN)





### 힙 -> 우선순위 큐

- 완전이진트리에 있는 노드 중 키값이 가장 큰 노드나 가장 작은 노드를 찾기 위해 만든 자료구조
- 우선순위 큐를 사용하는 대표적인 알고리즘 = 다익스트라, 프림(최소신장트리를 구하는), 허프만 트리

##### 최대힙: 부모노드키값 > 자식노드키값

##### 최소힙: 부모노드키값 < 자식노드키값

![1551759826027](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1551759826027.png)

트리 1은 완전이진트리가 아니라서

트리2는 대소관계가 명확하지 않아서. 루트는 가장 작거나 가장 큰 값



#### 힙 연산

##### 힙 삽입

* 힙은 스택처럼 생각하면 편함.
* 아래 예제들은 최대힙 가정



![1551759967477](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1551759967477.png)



-> 마지막 지점을 가리키는 정보(6)이 필요하다.

-> 스택의 탑처럼 힙의 top은 (6+1=)7이다. 

-> 이때 부모모다 작다면 그냥 그 자리에 넣어주면 된다.

![1551760078624](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1551760078624.png)

-> 하지만 부모보다 큰 값이 들어오면 7에 넣었다가 자신보다 작은 부모와 차근차근 바꿔준다.



##### 힙 삭제

![1551760243512](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1551760243512.png)

-> 힙에서는 루트원소만 삭제가능하다. 삭제 후 반환

-> 제일 마지막 자리를 루트 자리에 넣는다.

-> 자기보다 큰 자식노드들 중 더 큰 자식노드와 자리를 바꾼다.

-> 노드번호*2 의 숫자가 힙 top보다 크면 자식이 없다는 사실을 알 수 있다.

​	이게 종료조건이 된다!





연습:

1. 트리높이계산 3->3
2. 높이 3인노드 출력 7,8,9,10,11
3. 3번 노드가 루트인 트리의 전체 노드수 (3) -> 8
4. 8번 노드와 10번 노드의 공통조상을 출력하시오